{"version":3,"sources":["reducers/wallet/actions.js","api.js","helpers/web3/Web3Modal.js","reducers/wallet/index.js","reducers/index.js","store/index.js","helpers/web3/Wallet.js","components/Loading.js","helpers/notify.js","pages/client/BuyRole.jsx","Router.js","App.js","index.js"],"names":["actions","CHANGE_WALLET","buyRole","guildId","userId","roleId","axios","defaults","headers","post","withCredentials","credentials","web3ModalProvider","undefined","connectToWallet","a","web3Modal","connect","console","log","Web3","Web3Modal","cacheProvider","providerOptions","injected","package","initialState","address","appReducers","combineReducers","wallet","state","action","type","payload","store","applyMiddleware","reduxThunk","createStore","createStoreWithMiddleware","reducers","accountAddress","updateAccount","eth","getAccounts","updateAccountAddress","on","accounts","dispatch","walletActions","id","window","location","reload","initWallet","alert","length","clearCachedProvider","Loading","className","notify","msg","toast","success","error","warn","info","changeWalletAddress","withStyles","formControl","marginBottom","card","minWidth","maxWidth","display","justifyContent","noRole","fontSize","props","useState","loading","useParams","handleChangeWalletAddress","init","then","res","data","catch","err","useEffect","localStorage","getItem","Container","Routing","path","App","__REDUX_DEVTOOLS_EXTENSION__","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.201fb6a7.chunk.js","sourcesContent":["const actions = {\r\n    CHANGE_WALLET: 'CHANGE_WALLET',\r\n}\r\nexport default actions;","import axios from \"axios\";\r\n\r\nexport function getAuth() {\r\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n    return axios.get(`/api/auth`, { withCredentials: true, credentials: 'include' })\r\n}\r\n\r\nexport function getGuilds() {\r\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n    return axios.get(`/api/guild`, { withCredentials: true, credentials: 'include' })\r\n}\r\n\r\n// export function getDetailsGuild(serverId) {\r\n//     return axios.get(`/api/discord/getguildinfo?id=${serverId}`);\r\n// }\r\n\r\nexport function getRoles(guildId) {\r\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n    return axios.get(`/api/role?guildId=${guildId}`, { withCredentials: true, credentials: 'include' });\r\n}\r\n\r\nexport function buyRole(guildId, userId, roleId) {\r\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n    return axios.post(`/api/role/buyrole`, { guildId, userId, roleId }, { withCredentials: true, credentials: 'include' });\r\n}\r\n\r\nexport function modifyRole(role) {\r\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n    return axios.post(`/api/role/modifyRole`, { role }, { withCredentials: true, credentials: 'include' });\r\n}\r\n\r\nexport function logout() {\r\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n    return axios.get(`/api/auth/logout`, { withCredentials: true, credentials: 'include' })\r\n}","import Web3 from \"web3\";\r\nimport Web3Modal from \"web3modal\";\r\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\r\n\r\nexport let web3ModalProvider = undefined\r\n\r\nexport async function connectToWallet() {\r\n  web3ModalProvider = await web3Modal.connect();\r\n  console.log(\"provider:\", web3ModalProvider);\r\n  return new Web3(web3ModalProvider);\r\n}\r\n\r\nexport function clearWalletProvider() {\r\n  web3Modal.clearCachedProvider();\r\n}\r\n\r\nconst providerOptions = {\r\n  injected: {\r\n    package: null\r\n  }\r\n};\r\n\r\nconst web3Modal = new Web3Modal({\r\n  cacheProvider: true,\r\n  providerOptions\r\n});\r\n","import actions from './actions'\r\n\r\nconst initialState = {\r\n    address: 'first address'\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n\r\n    switch (action.type) {\r\n        case actions.CHANGE_WALLET:\r\n            console.log('change wallet reducer:', action)\r\n            return {\r\n                ...state,\r\n                address: action.payload\r\n            }\r\n    }\r\n\r\n    return state;\r\n}","import { combineReducers } from 'redux';\r\nimport wallet from './wallet';\r\n\r\nconst appReducers = combineReducers({\r\n    wallet,\r\n})\r\n\r\nexport default appReducers;","import { createStore, applyMiddleware } from 'redux';\r\nimport reduxThunk from 'redux-thunk';\r\nimport reducers from '../reducers/index';\r\n\r\nconst createStoreWithMiddleware = applyMiddleware(reduxThunk)(createStore);\r\nconst store = createStoreWithMiddleware(reducers);\r\n\r\nexport default store","import { connect } from 'react-redux';\r\n\r\nimport { clearWalletProvider, connectToWallet, web3ModalProvider } from \"./Web3Modal\";\r\nimport walletActions from '../../reducers/wallet/actions';\r\n\r\nimport store from '../../store'\r\n\r\nexport let accountAddress = undefined\r\nexport let web3Modal = undefined\r\n\r\nasync function updateAccount() {\r\n  const accounts = await web3Modal.eth.getAccounts()\r\n  updateAccountAddress(accounts)\r\n\r\n  if (web3ModalProvider !== undefined && web3ModalProvider !== null) {\r\n    web3ModalProvider.on(\"accountsChanged\", (accounts) => {\r\n      updateAccountAddress(accounts)\r\n      store.dispatch({ type: walletActions.CHANGE_WALLET, payload: accounts[0] })\r\n    });\r\n    web3ModalProvider.on(\"chainChanged\", (id) => {\r\n      window.location.reload()\r\n    });\r\n  }\r\n}\r\n\r\nexport async function initWallet() {\r\n  if (web3Modal === undefined) {\r\n    try {\r\n      web3Modal = await connectToWallet()\r\n      await updateAccount()\r\n      \r\n    } catch (e) {\r\n      // Wallet Connect\r\n      window.alert(\"Wallet Connect Error!\")\r\n      console.log(\"wallet connect error, reconnecting\")\r\n\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nexport function updateAccountAddress(accounts) {\r\n  if (accounts !== undefined && accounts.length > 0) {\r\n    accountAddress = accounts[0]\r\n  } else if (accountAddress !== undefined) {\r\n    clearWalletProvider()\r\n    accountAddress = undefined\r\n  }\r\n}\r\n","export default function Loading() {\r\n  return (\r\n    <>\r\n      <div className=\"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-trueGray-900 opacity-75 flex flex-col items-center justify-center\">\r\n        <div className=\"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4\"></div>\r\n        <h2 className=\"text-center text-white text-xl font-semibold\">\r\n          Loading...\r\n        </h2>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","\r\n// Toastr Message\r\nimport { toast } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\n// Toastr Message\r\n\r\nconst notify = (type, msg) => {\r\n    switch (type) {\r\n        case 'success': toast.success(msg)\r\n            break;\r\n        case 'error': toast.error(msg)\r\n            break;\r\n        case 'warn': toast.warn(msg)\r\n            break;\r\n        case 'info': toast.info(msg)\r\n            break;\r\n        default: toast(msg);\r\n    }\r\n};\r\nexport default notify","import { useEffect, useState } from 'react'\r\nimport { useParams } from \"react-router\";\r\nimport { connect } from 'react-redux';\r\n\r\nimport walletActions from '../../reducers/wallet/actions'\r\n\r\nimport {\r\n  Box,\r\n  Container,\r\n  Typography,\r\n} from '@mui/material';\r\n\r\nimport { withStyles } from '@mui/styles';\r\n\r\nimport { buyRole } from '../../api';\r\nimport ConnectWalletNavBar from '../../components/Header/ConnectWalletNavBar';\r\nimport Loading from \"../../components/Loading\";\r\n\r\n// Toastr Message\r\nimport notify from '../../helpers/notify';\r\nimport { ToastContainer } from 'react-toastify'\r\n// Toastr Message\r\n\r\nimport { accountAddress, initWallet } from \"../../helpers/web3/Wallet\";\r\n\r\nconst styles = {\r\n  formControl: {\r\n    marginBottom: '20px'\r\n  },\r\n\r\n  card: {\r\n    minWidth: '200px',\r\n    maxWidth: '350px',\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n\r\n  noRole: {\r\n    fontSize: '30px'\r\n  }\r\n}\r\n\r\nfunction BuyRole(props) {\r\n  // const data = { \"roles\": [{ \"id\": \"910451180457586709\", \"name\": \"Administrator\", \"permissions\": \"1099511103487\", \"position\": 4, \"color\": 15742004, \"hoist\": false, \"managed\": false, \"mentionable\": false, \"icon\": null, \"unicode_emoji\": null, \"price\": \"12\" }, { \"id\": \"911554332246302740\", \"name\": \"new role\", \"permissions\": \"1071698660929\", \"position\": 1, \"color\": 0, \"hoist\": false, \"managed\": false, \"mentionable\": false, \"icon\": null, \"unicode_emoji\": null, \"price\": null }] }\r\n\r\n  // const [loading, setLoading] = useState(false);\r\n  // const [roles, setRoles] = useState(data.roles);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [roles, setRoles] = useState([]);\r\n\r\n  const { guildId, userId } = useParams();\r\n\r\n  const handleChangeWalletAddress = async (address) => {\r\n      props.changeWalletAddress(address)\r\n  }\r\n\r\n  const init = async () => {\r\n    await initWallet()\r\n    handleChangeWalletAddress(accountAddress)\r\n\r\n    buyRole(guildId, userId, '912254102623379496').then((res) => {\r\n      notify('success', \"Success\")\r\n      console.log(res.data)\r\n    }).catch(err => {\r\n      notify('error', \"Missing Permission\")\r\n      console.log(err)\r\n    })\r\n}\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"WEB3_CONNECT_CACHED_PROVIDER\")) {\r\n        init()\r\n    } else {\r\n        handleChangeWalletAddress('')\r\n    }\r\n  }, [props.address])\r\n\r\n  useEffect(() => {\r\n      init()\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      {loading === true ? (\r\n        <Loading />\r\n      ) : (\r\n        <>\r\n          <div>\r\n\r\n            <Container maxWidth=\"lg\" >\r\n\r\n            </Container>\r\n          </div>\r\n        </>\r\n      )\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    address: state.wallet.address\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    changeWalletAddress: (address) => {\r\n      dispatch({ type: walletActions.CHANGE_WALLET, payload: address })\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(BuyRole))","import {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n} from \"react-router-dom\";\r\n\r\nimport BuyRole from \"./pages/client/BuyRole\";\r\n\r\n// import ProtectedRoute from './helpers/ProtectedRoute'\r\n\r\nexport default function Routing() {\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route path=\"/role/guilds/:guildId/members/:userId\">\r\n          <BuyRole />\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n","import Routing from './Router';\r\nfunction App() {\r\n  return (\r\n    <>\r\n      <Routing />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './App';\r\nimport './assets/index.css';\r\n\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport appReducers from './reducers/index';\r\n\r\nconst store = createStore(\r\n  appReducers,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n  applyMiddleware(thunk)\r\n);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />,\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}